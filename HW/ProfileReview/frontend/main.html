{% extends 'base.html' %}
{% block title %}Main{% endblock title %}
{% block body %}
    
    <section class="w-100 h-100">
        <div class="container mt-2">
            <form action="{% url 'add_profile' %}" method="POST" class="mb-3">
                {% csrf_token %}
    {#            {{ form }}#}
                <input type="text" name="username" placeholder="username" class="form-control mb-2">
                <input type="text" name="description" placeholder="description" class="form-control mb-2">
                <input type="submit" value="Добавить" class="btn btn-primary w-100">
            </form>
        <div class="d-flex flex-wrap justify-content-between">
            {% for user in users %}
                <div class="card mb-3" style="width: 33%;">
                  <div class="card-body">
                    <h5 class="card-title">{{ user.username }}</h5>
                    <p class="card-text">{{ user.description }}</p>
                    <h5>Поставите оценку?</h5>
{#                    {{ user.estimation }}#}
                      {% if not user.estimation %}
                    <div class="d-flex  align-items-center">
                     <form action="{% url 'new_estimation' %}" method="POST" class="me-3" style="">
                         {% csrf_token %}
                         <div>

                             <input type="hidden" name="user_id" value="{{ user.id }}">
                             <input class="star star-5" id="star-10-{{ user.id }}" type="radio" name="estimation" value="10"/>
                            <label class="star star-5" for="star-10-{{ user.id }}"></label>
                             <input class="star star-5" id="star-9-{{ user.id }}" type="radio" name="estimation" value="9"/>
                            <label class="star star-5" for="star-9-{{ user.id }}"></label>
                             <input class="star star-5" id="star-8-{{ user.id }}" type="radio" name="estimation" value="8"/>
                            <label class="star star-5" for="star-8-{{ user.id }}"></label>
                             <input class="star star-5" id="star-7-{{ user.id }}" type="radio" name="estimation" value="7"/>
                            <label class="star star-5" for="star-7-{{ user.id }}"></label>
                             <input class="star star-5" id="star-6-{{ user.id }}" type="radio" name="estimation" value="6"/>
                            <label class="star star-5" for="star-6-{{ user.id }}"></label>
                             <br>
                             <input class="star star-5" id="star-5-{{ user.id }}" type="radio" name="estimation" value="5"/>
                            <label class="star star-5" for="star-5-{{ user.id }}"></label>
                            <input class="star star-4" id="star-4-{{ user.id }}" type="radio" name="estimation" value="4"/>
                            <label class="star star-4" for="star-4-{{ user.id }}"></label>
                            <input class="star star-3" id="star-3-{{ user.id }}" type="radio" name="estimation" value="3"/>
                            <label class="star star-3" for="star-3-{{ user.id }}"></label>
                            <input class="star star-2" id="star-2-{{ user.id }}" type="radio" name="estimation" value="2"/>
                            <label class="star star-2" for="star-2-{{ user.id }}"></label>
                            <input class="star star-1" id="star-1-{{ user.id }}" type="radio" name="estimation" value="1"/>
                            <label class="star star-1" for="star-1-{{ user.id }}"></label>
                         </div>

                         <input type="submit" value="Оставить оценку" class="btn btn-primary">
                      </form>
                    </div>
                      {% else %}
                      Ваша оценка: {{ user.estimation.estimation }}
                      {% endif %}
                  </div>
                </div>
            {% endfor %}
        </div>

        </div>


    </section>
    
{% endblock body %}

